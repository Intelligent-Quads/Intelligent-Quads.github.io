<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Control_functions module | Intelligent Quads Documentation</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="m-dark+doxygen.compiled.css" />
  <link rel="icon" href="favicon-dark.png" type="image/png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#22272e" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <a href="index.html" id="m-navbar-brand" class="m-col-t-8 m-col-m-none m-left-m">Intelligent Quads Documentation</a>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a href="#search" class="m-dox-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
          <path d="m6 0c-3.3144 0-6 2.6856-6 6 0 3.3144 2.6856 6 6 6 1.4858 0 2.8463-0.54083 3.8945-1.4355-0.0164 0.33797 0.14734 0.75854 0.5 1.1504l3.2227 3.7891c0.55185 0.6139 1.4517 0.66544 2.002 0.11524 0.55022-0.55022 0.49866-1.4501-0.11524-2.002l-3.7891-3.2246c-0.39184-0.35266-0.81242-0.51469-1.1504-0.5 0.89472-1.0482 1.4355-2.4088 1.4355-3.8945 0-3.3128-2.6856-5.998-6-5.998zm0 1.5625a4.4375 4.4375 0 0 1 4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375-4.4375 4.4375 4.4375 0 0 1 4.4375-4.4375z"/>
        </svg></a>
        <a id="m-navbar-show" href="#navigation" title="Show navigation"></a>
        <a id="m-navbar-hide" href="#" title="Hide navigation"></a>
      </div>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li><a href="pages.html">Pages</a></li>
            <li><a href="namespaces.html">Namespaces</a></li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="3">
            <li><a href="annotated.html">Classes</a></li>
            <li><a href="files.html">Files</a></li>
            <li class="m-show-m"><a href="#search" class="m-dox-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
              <path d="m6 0c-3.3144 0-6 2.6856-6 6 0 3.3144 2.6856 6 6 6 1.4858 0 2.8463-0.54083 3.8945-1.4355-0.0164 0.33797 0.14734 0.75854 0.5 1.1504l3.2227 3.7891c0.55185 0.6139 1.4517 0.66544 2.002 0.11524 0.55022-0.55022 0.49866-1.4501-0.11524-2.002l-3.7891-3.2246c-0.39184-0.35266-0.81242-0.51469-1.1504-0.5 0.89472-1.0482 1.4355-2.4088 1.4355-3.8945 0-3.3128-2.6856-5.998-6-5.998zm0 1.5625a4.4375 4.4375 0 0 1 4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375-4.4375 4.4375 4.4375 0 0 1 4.4375-4.4375z"/>
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          Control_functions <span class="m-thin">module</span></h1>
        <div class="m-block m-default">
          <h3>Contents</h3>
          <ul>
            <li>
              Reference
              <ul>
                <li><a href="#nested-classes">Classes</a></li>
                <li><a href="#func-members">Functions</a></li>
              </ul>
            </li>
          </ul>
        </div>
<p>This module is designed to make high level control programming more simple.</p>
        <section id="nested-classes">
          <h2><a href="#nested-classes">Classes</a></h2>
          <dl class="m-dox">
            <dt>
              struct <a href="structcontrol__api__waypoint.html" class="m-dox">control_api_waypoint</a>
            </dt>
            <dd></dd>
          </dl>
        </section>
        <section id="func-members">
          <h2><a href="#func-members">Functions</a></h2>
          <dl class="m-dox">
            <dt>
              <span class="m-dox-wrap-bumper">void <a href="#ga92292bc0da7dd2a58edf8e9aa10eb682" class="m-dox">set_heading</a>(</span><span class="m-dox-wrap">float heading)</span>
            </dt>
            <dd></dd>
            <dt>
              <span class="m-dox-wrap-bumper">void <a href="#gab90a45d8b081ba329b9d0f886adbc2d5" class="m-dox">set_destination</a>(</span><span class="m-dox-wrap">float x,
              float y,
              float z,
              float psi)</span>
            </dt>
            <dd></dd>
            <dt>
              <span class="m-dox-wrap-bumper">void <a href="#ga60eb8f08f1ac190352a7ad6532e4f70e" class="m-dox">spinOffSetPub</a>(</span><span class="m-dox-wrap">)</span>
            </dt>
            <dd></dd>
            <dt>
              <span class="m-dox-wrap-bumper">auto <a href="#ga1921a30d419eb397f7e40875217b45d1" class="m-dox">wait4connect</a>(</span><span class="m-dox-wrap">) -&gt; int</span>
            </dt>
            <dd></dd>
            <dt>
              <span class="m-dox-wrap-bumper">auto <a href="#gab6fe46f505ab9804b4ed98b96286a811" class="m-dox">wait4start</a>(</span><span class="m-dox-wrap">) -&gt; int</span>
            </dt>
            <dd></dd>
            <dt>
              <span class="m-dox-wrap-bumper">auto <a href="#ga2a1100bb15673a9322c5be3bb8e9999f" class="m-dox">initialize_local_frame</a>(</span><span class="m-dox-wrap">) -&gt; int</span>
            </dt>
            <dd></dd>
            <dt>
              <span class="m-dox-wrap-bumper">auto <a href="#gac0aa671c99c09687515ec5bb8891c7d2" class="m-dox">takeoff</a>(</span><span class="m-dox-wrap">float takeoff_alt) -&gt; int</span>
            </dt>
            <dd></dd>
            <dt>
              <span class="m-dox-wrap-bumper">auto <a href="#ga54abc3f6eae022a8710bc0c2e1c54fbe" class="m-dox">check_waypoint_reached</a>(</span><span class="m-dox-wrap">) -&gt; int</span>
            </dt>
            <dd></dd>
            <dt>
              <span class="m-dox-wrap-bumper">auto <a href="#ga52a11a139e56315de52d2ab439b0d203" class="m-dox">land</a>(</span><span class="m-dox-wrap">) -&gt; int</span>
            </dt>
            <dd></dd>
            <dt>
              <span class="m-dox-wrap-bumper">auto <a href="#gae693b071b5392f9253cdfc1f4f362fcc" class="m-dox">init_publisher_subscriber</a>(</span><span class="m-dox-wrap">ros::NodeHandle controlnode) -&gt; int</span>
            </dt>
            <dd></dd>
          </dl>
        </section>
        <section>
          <h2>Function documentation</h2>
          <section class="m-dox-details" id="ga92292bc0da7dd2a58edf8e9aa10eb682"><div>
            <h3>
              <span class="m-dox-wrap-bumper">void </span><span class="m-dox-wrap"><span class="m-dox-wrap-bumper"><a href="#ga92292bc0da7dd2a58edf8e9aa10eb682" class="m-dox-self">set_heading</a>(</span><span class="m-dox-wrap">float heading)</span></span>
            </h3>
            <table class="m-table m-fullwidth m-flat">
              <tfoot>
                <tr>
                  <th style="width: 1%">Returns</th>
                  <td>n/a</td>
                </tr>
              </tfoot>
            </table>
<p>This function is used to specify the drone’s heading in the local reference frame. Psi is a counter clockwise rotation following the drone’s reference frame defined by the x axis through the right side of the drone with the y axis through the front of the drone.</p>
          </div></section>
          <section class="m-dox-details" id="gab90a45d8b081ba329b9d0f886adbc2d5"><div>
            <h3>
              <span class="m-dox-wrap-bumper">void </span><span class="m-dox-wrap"><span class="m-dox-wrap-bumper"><a href="#gab90a45d8b081ba329b9d0f886adbc2d5" class="m-dox-self">set_destination</a>(</span><span class="m-dox-wrap">float x,
              float y,
              float z,
              float psi)</span></span>
            </h3>
            <table class="m-table m-fullwidth m-flat">
              <tfoot>
                <tr>
                  <th style="width: 1%">Returns</th>
                  <td>n/a</td>
                </tr>
              </tfoot>
            </table>
<p>This function is used to command the drone to fly to a waypoint. These waypoints should be specified in the local reference frame. This is typically defined from the location the drone is launched. Psi is counter clockwise rotation following the drone’s reference frame defined by the x axis through the right side of the drone with the y axis through the front of the drone.</p>
          </div></section>
          <section class="m-dox-details" id="ga60eb8f08f1ac190352a7ad6532e4f70e"><div>
            <h3>
              <span class="m-dox-wrap-bumper">void </span><span class="m-dox-wrap"><span class="m-dox-wrap-bumper"><a href="#ga60eb8f08f1ac190352a7ad6532e4f70e" class="m-dox-self">spinOffSetPub</a>(</span><span class="m-dox-wrap">)</span></span>
            </h3>
            <table class="m-table m-fullwidth m-flat">
              <tfoot>
                <tr>
                  <th style="width: 1%">Returns</th>
                  <td>n/a</td>
                </tr>
              </tfoot>
            </table>
<p>This function publishes the angle between the ENU frame and the local reference frame specified by <a href="group__control__functions.html#ga2a1100bb15673a9322c5be3bb8e9999f" class="m-dox">initialize_<wbr />local_<wbr />frame()</a>. This usefull if you have other nodes that need this information.</p>
          </div></section>
          <section class="m-dox-details" id="ga1921a30d419eb397f7e40875217b45d1"><div>
            <h3>
              <span class="m-dox-wrap-bumper">int </span><span class="m-dox-wrap"><span class="m-dox-wrap-bumper"><a href="#ga1921a30d419eb397f7e40875217b45d1" class="m-dox-self">wait4connect</a>(</span><span class="m-dox-wrap">)</span></span>
            </h3>
            <table class="m-table m-fullwidth m-flat">
              <tfoot>
                <tr>
                  <th style="width: 1%">Returns</th>
                  <td>0 - connected to fcu</td>
                </tr>
              </tfoot>
            </table>
<p>Wait for connect is a function that will hold the program until communication with the FCU is established.</p>
          </div></section>
          <section class="m-dox-details" id="gab6fe46f505ab9804b4ed98b96286a811"><div>
            <h3>
              <span class="m-dox-wrap-bumper">int </span><span class="m-dox-wrap"><span class="m-dox-wrap-bumper"><a href="#gab6fe46f505ab9804b4ed98b96286a811" class="m-dox-self">wait4start</a>(</span><span class="m-dox-wrap">)</span></span>
            </h3>
            <table class="m-table m-fullwidth m-flat">
              <tfoot>
                <tr>
                  <th style="width: 1%">Returns</th>
                  <td>0 - mission started</td>
                </tr>
              </tfoot>
            </table>
<p>Wait for strat will hold the program until the user signals the FCU to enther mode guided. This is typically done from a switch on the safety pilot’s remote or from the ground control station.</p>
          </div></section>
          <section class="m-dox-details" id="ga2a1100bb15673a9322c5be3bb8e9999f"><div>
            <h3>
              <span class="m-dox-wrap-bumper">int </span><span class="m-dox-wrap"><span class="m-dox-wrap-bumper"><a href="#ga2a1100bb15673a9322c5be3bb8e9999f" class="m-dox-self">initialize_local_frame</a>(</span><span class="m-dox-wrap">)</span></span>
            </h3>
            <table class="m-table m-fullwidth m-flat">
              <tfoot>
                <tr>
                  <th style="width: 1%">Returns</th>
                  <td>0 - frame initialized</td>
                </tr>
              </tfoot>
            </table>
<p>This function will create a local reference frame based on the starting location of the drone. This is typically done right before takeoff. This reference frame is what all of the the set destination commands will be in reference to.</p>
          </div></section>
          <section class="m-dox-details" id="gac0aa671c99c09687515ec5bb8891c7d2"><div>
            <h3>
              <span class="m-dox-wrap-bumper">int </span><span class="m-dox-wrap"><span class="m-dox-wrap-bumper"><a href="#gac0aa671c99c09687515ec5bb8891c7d2" class="m-dox-self">takeoff</a>(</span><span class="m-dox-wrap">float takeoff_alt)</span></span>
            </h3>
            <table class="m-table m-fullwidth m-flat">
              <tfoot>
                <tr>
                  <th style="width: 1%">Returns</th>
                  <td>0 - nominal takeoff</td>
                </tr>
              </tfoot>
            </table>
<p>The takeoff function will arm the drone and put the drone in a hover above the initial position.</p>
          </div></section>
          <section class="m-dox-details" id="ga54abc3f6eae022a8710bc0c2e1c54fbe"><div>
            <h3>
              <span class="m-dox-wrap-bumper">int </span><span class="m-dox-wrap"><span class="m-dox-wrap-bumper"><a href="#ga54abc3f6eae022a8710bc0c2e1c54fbe" class="m-dox-self">check_waypoint_reached</a>(</span><span class="m-dox-wrap">)</span></span>
            </h3>
            <table class="m-table m-fullwidth m-flat">
              <tfoot>
                <tr>
                  <th style="width: 1%">Returns</th>
                  <td>1 - waypoint reached</td>
                </tr>
              </tfoot>
            </table>
<p>This function returns an int of 1 or 0. THis function can be used to check when to request the next waypoint in the mission.</p>
          </div></section>
          <section class="m-dox-details" id="ga52a11a139e56315de52d2ab439b0d203"><div>
            <h3>
              <span class="m-dox-wrap-bumper">int </span><span class="m-dox-wrap"><span class="m-dox-wrap-bumper"><a href="#ga52a11a139e56315de52d2ab439b0d203" class="m-dox-self">land</a>(</span><span class="m-dox-wrap">)</span></span>
            </h3>
            <table class="m-table m-fullwidth m-flat">
              <tfoot>
                <tr>
                  <th style="width: 1%">Returns</th>
                  <td>1 - mode change successful</td>
                </tr>
              </tfoot>
            </table>
<p>this function changes the mode of the drone to land</p>
          </div></section>
          <section class="m-dox-details" id="gae693b071b5392f9253cdfc1f4f362fcc"><div>
            <h3>
              <span class="m-dox-wrap-bumper">int </span><span class="m-dox-wrap"><span class="m-dox-wrap-bumper"><a href="#gae693b071b5392f9253cdfc1f4f362fcc" class="m-dox-self">init_publisher_subscriber</a>(</span><span class="m-dox-wrap">ros::NodeHandle controlnode)</span></span>
            </h3>
            <table class="m-table m-fullwidth m-flat">
              <tfoot>
                <tr>
                  <th style="width: 1%">Returns</th>
                  <td>n/a</td>
                </tr>
              </tfoot>
            </table>
<p>This function is called at the beginning of a program and will start of the communication links to the FCU. The function requires the program&#x27;s ros nodehandle as an input</p>
          </div></section>
        </section>
      </div>
    </div>
  </div>
</article></main>
<div class="m-dox-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-dox-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">&hellip;</div>
        </div>
        <div class="m-dox-search-content">
          <form>
            <input type="search" name="q" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" autocomplete="off" spellcheck="false" />
          </form>
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
          <div id="search-help" class="m-text m-dim m-text-center">
            <p class="m-noindent">Search for symbols, directories, files, pages or
            modules. You can omit any prefix from the symbol or file path; adding a
            <code>:</code> or <code>/</code> suffix lists all members of given symbol or
            directory.</p>
            <p class="m-noindent">Use <span class="m-label m-dim">&darr;</span>
            / <span class="m-label m-dim">&uarr;</span> to navigate through the list,
            <span class="m-label m-dim">Enter</span> to go.
            <span class="m-label m-dim">Tab</span> autocompletes common prefix, you can
            copy a link to the result using <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">L</span> while <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">M</span> produces a Markdown link.</p>

          </div>
          <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search.js"></script>
<script src="searchdata.js" async="async"></script>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>Intelligent Quads Documentation. Created by <a href="https://doxygen.org/">Doxygen</a> 1.8.16 and <a href="https://mcss.mosra.cz/">m.css</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>
