<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Enviroment Setup Instructions | Intelligent Quads Documentation</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="m-dark+doxygen.compiled.css" />
  <link rel="icon" href="favicon-dark.png" type="image/png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#22272e" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <a href="index.html" id="m-navbar-brand" class="m-col-t-8 m-col-m-none m-left-m">Intelligent Quads Documentation</a>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a href="#search" class="m-dox-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
          <path d="m6 0c-3.3144 0-6 2.6856-6 6 0 3.3144 2.6856 6 6 6 1.4858 0 2.8463-0.54083 3.8945-1.4355-0.0164 0.33797 0.14734 0.75854 0.5 1.1504l3.2227 3.7891c0.55185 0.6139 1.4517 0.66544 2.002 0.11524 0.55022-0.55022 0.49866-1.4501-0.11524-2.002l-3.7891-3.2246c-0.39184-0.35266-0.81242-0.51469-1.1504-0.5 0.89472-1.0482 1.4355-2.4088 1.4355-3.8945 0-3.3128-2.6856-5.998-6-5.998zm0 1.5625a4.4375 4.4375 0 0 1 4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375-4.4375 4.4375 4.4375 0 0 1 4.4375-4.4375z"/>
        </svg></a>
        <a id="m-navbar-show" href="#navigation" title="Show navigation"></a>
        <a id="m-navbar-hide" href="#" title="Hide navigation"></a>
      </div>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li><a href="pages.html">Pages</a></li>
            <li><a href="namespaces.html">Namespaces</a></li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="3">
            <li><a href="annotated.html">Classes</a></li>
            <li><a href="files.html">Files</a></li>
            <li class="m-show-m"><a href="#search" class="m-dox-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
              <path d="m6 0c-3.3144 0-6 2.6856-6 6 0 3.3144 2.6856 6 6 6 1.4858 0 2.8463-0.54083 3.8945-1.4355-0.0164 0.33797 0.14734 0.75854 0.5 1.1504l3.2227 3.7891c0.55185 0.6139 1.4517 0.66544 2.002 0.11524 0.55022-0.55022 0.49866-1.4501-0.11524-2.002l-3.7891-3.2246c-0.39184-0.35266-0.81242-0.51469-1.1504-0.5 0.89472-1.0482 1.4355-2.4088 1.4355-3.8945 0-3.3128-2.6856-5.998-6-5.998zm0 1.5625a4.4375 4.4375 0 0 1 4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375-4.4375 4.4375 4.4375 0 0 1 4.4375-4.4375z"/>
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          Enviroment Setup Instructions
        </h1>
<p>Texas Aerial Robotics uses a variety of software packages. Some of these include, ROS, Arducopter, MAVROS, ect.</p><p>We use <strong>Ubuntu 18.04</strong> and <strong>ROS Melodic</strong></p><p>Note that there is a <strong>Troubleshooting</strong> section at the bottom of this page.</p><p>Code blocks are meant to be typed in Terminal windows. &quot;Control+Alt+T&quot; opens a new Terminal window.</p><h3>1. Install ROS</h3><ul><li>Do <em>Desktop Install</em></li><li>Follow until <em>Step 1.7</em> at the end of the page</li></ul><p>First, install <strong>ROS Melodic</strong> using the following instructions: <a href="http://wiki.ros.org/melodic/Installation/Ubuntu">http:/<wbr />/<wbr />wiki.ros.org/<wbr />melodic/<wbr />Installation/<wbr />Ubuntu</a></p><h3>2. Set Up Catkin workspace</h3><p>We use <code>catkin build</code> instead of <code>catkin_make</code>. Please install the following: <code class="m-code"><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">python</span><span class="o">-</span><span class="n">wstool</span> <span class="n">python</span><span class="o">-</span><span class="n">rosinstall</span><span class="o">-</span><span class="n">generator</span> <span class="n">python</span><span class="o">-</span><span class="n">catkin</span><span class="o">-</span><span class="n">tools</span></code></p><p>Then, initialize the catkin workspace:</p><pre class="m-code"><span class="n">mkdir</span> <span class="o">-</span><span class="n">p</span> <span class="o">~/</span><span class="n">catkin_ws</span><span class="o">/</span><span class="n">src</span>
<span class="n">cd</span> <span class="o">~/</span><span class="n">catkin_ws</span>
<span class="n">catkin</span> <span class="n">init</span></pre><h3>3. Dependencies installation</h3><p>Install <code>mavros</code> and <code>mavlink</code> from source:</p><pre class="m-code"><span class="n">cd</span> <span class="o">~/</span><span class="n">catkin_ws</span>
<span class="n">wstool</span> <span class="n">init</span> <span class="o">~/</span><span class="n">catkin_ws</span><span class="o">/</span><span class="n">src</span>

<span class="n">rosinstall_generator</span> <span class="o">--</span><span class="n">upstream</span> <span class="n">mavros</span> <span class="o">|</span> <span class="n">tee</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">mavros</span><span class="p">.</span><span class="n">rosinstall</span>
<span class="n">rosinstall_generator</span> <span class="n">mavlink</span> <span class="o">|</span> <span class="n">tee</span> <span class="o">-</span><span class="n">a</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">mavros</span><span class="p">.</span><span class="n">rosinstall</span>
<span class="n">wstool</span> <span class="n">merge</span> <span class="o">-</span><span class="n">t</span> <span class="n">src</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">mavros</span><span class="p">.</span><span class="n">rosinstall</span>
<span class="n">wstool</span> <span class="n">update</span> <span class="o">-</span><span class="n">t</span> <span class="n">src</span>
<span class="n">rosdep</span> <span class="n">install</span> <span class="o">--</span><span class="n">from</span><span class="o">-</span><span class="n">paths</span> <span class="n">src</span> <span class="o">--</span><span class="n">ignore</span><span class="o">-</span><span class="n">src</span> <span class="o">--</span><span class="n">rosdistro</span> <span class="err">`</span><span class="n">echo</span> <span class="err">$</span><span class="n">ROS_DISTRO</span><span class="err">`</span> <span class="o">-</span><span class="n">y</span>

<span class="n">catkin</span> <span class="n">build</span></pre><p>Open your <code>~/.bashrc</code> for editing: <code class="m-code"><span class="n">gedit</span> <span class="o">~/</span><span class="p">.</span><span class="n">bashrc</span></code></p><p>Add this line to end of <code>~/.bashrc</code>: <code class="m-code"><span class="n">source</span> <span class="o">~/</span><span class="n">catkin_ws</span><span class="o">/</span><span class="n">devel</span><span class="o">/</span><span class="n">setup</span><span class="p">.</span><span class="n">bash</span></code> Save and exit. Then run: <code class="m-code"><span class="n">source</span> <span class="o">~/</span><span class="p">.</span><span class="n">bashrc</span></code></p><h3>4. Clone our ROS package repository</h3><pre class="m-code"><span class="n">cd</span> <span class="o">~/</span><span class="n">catkin_ws</span><span class="o">/</span><span class="n">src</span>
<span class="n">git</span> <span class="n">clone</span> <span class="nl">https</span><span class="p">:</span><span class="c1">//github.com/Texas-Aerial-Robotics/Mission8_OutOfControls.git</span></pre><p>Our repository should now be copied to <code>~/catkin_ws/src/Mission8_OutOfControls/</code> (don&#x27;t run this line. This is just saying that if you browse in the file manager, you will see those folders).</p><h3>5. Build instructions</h3><p>Inside <code>catkin_ws</code>, run <code>catkin build</code>:</p><pre class="m-code"><span class="n">cd</span> <span class="o">~/</span><span class="n">catkin_ws</span>
<span class="n">catkin</span> <span class="n">build</span></pre><h3>6. Install Ardupilot</h3><p>In home directory:</p><pre class="m-code"><span class="n">cd</span> <span class="o">~</span>
<span class="n">git</span> <span class="n">clone</span> <span class="nl">https</span><span class="p">:</span><span class="c1">//github.com/Texas-Aerial-Robotics/ardupilot.git</span>
<span class="n">cd</span> <span class="n">ardupilot</span>
<span class="n">git</span> <span class="n">checkout</span> <span class="n">Copter</span><span class="o">-</span><span class="mf">3.5</span>
<span class="n">git</span> <span class="n">submodule</span> <span class="n">update</span> <span class="o">--</span><span class="n">init</span> <span class="o">--</span><span class="n">recursive</span></pre><p>Install some packages:</p><pre class="m-code"><span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">python</span><span class="o">-</span><span class="n">matplotlib</span> <span class="n">python</span><span class="o">-</span><span class="n">serial</span> <span class="n">python</span><span class="o">-</span><span class="n">wxgtk3</span><span class="mf">.0</span> <span class="n">python</span><span class="o">-</span><span class="n">wxtools</span> <span class="n">python</span><span class="o">-</span><span class="n">lxml</span> <span class="n">python</span><span class="o">-</span><span class="n">scipy</span> <span class="n">python</span><span class="o">-</span><span class="n">opencv</span> <span class="n">ccache</span> <span class="n">gawk</span> <span class="n">git</span> <span class="n">python</span><span class="o">-</span><span class="n">pip</span> <span class="n">python</span><span class="o">-</span><span class="n">pexpect</span>
<span class="n">sudo</span> <span class="n">pip2</span> <span class="n">install</span> <span class="n">future</span> <span class="n">pymavlink</span> <span class="n">MAVProxy</span></pre><p>Open <code>~/.bashrc</code> for editing: <code class="m-code"><span class="n">gedit</span> <span class="o">~/</span><span class="p">.</span><span class="n">bashrc</span></code></p><p>Add these lines to end of <code>~/.bashrc</code> (the file open in the text editor):</p><pre class="m-code"><span class="k">export</span> <span class="n">PATH</span><span class="o">=</span><span class="err">$</span><span class="nl">PATH</span><span class="p">:</span><span class="err">$</span><span class="n">HOME</span><span class="o">/</span><span class="n">ardupilot</span><span class="o">/</span><span class="n">Tools</span><span class="o">/</span><span class="n">autotest</span>
<span class="k">export</span> <span class="n">PATH</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="nl">ccache</span><span class="p">:</span><span class="err">$</span><span class="n">PATH</span></pre><p>Save and close the text editor.</p><p>Reload <code>~/.bashrc</code>: <code class="m-code"><span class="p">.</span> <span class="o">~/</span><span class="p">.</span><span class="n">bashrc</span></code></p><p>Run SITL (Software In The Loop) once to set params:</p><pre class="m-code"><span class="n">cd</span> <span class="o">~/</span><span class="n">ardupilot</span><span class="o">/</span><span class="n">ArduCopter</span>
<span class="n">sim_vehicle</span><span class="p">.</span><span class="n">py</span> <span class="o">-</span><span class="n">w</span></pre><p>Once the new Terminal window pops up and you see the ArduPilot software say &quot;READY TO FLY,&quot; you can kill the process by hitting &quot;Control+C&quot; in the Terminal it is running out of.</p><h3>7. Install Gazebo</h3><p>Setup your computer to accept software from <a href="http://packages.osrfoundation.org:">http:/<wbr />/<wbr />packages.osrfoundation.org:</a> <code class="m-code"><span class="n">sudo</span> <span class="n">sh</span> <span class="o">-</span><span class="n">c</span> <span class="err">&#39;</span><span class="n">echo</span> <span class="s">&quot;deb http://packages.osrfoundation.org/gazebo/ubuntu-stable `lsb_release -cs` main&quot;</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">apt</span><span class="o">/</span><span class="n">sources</span><span class="p">.</span><span class="n">list</span><span class="p">.</span><span class="n">d</span><span class="o">/</span><span class="n">gazebo</span><span class="o">-</span><span class="n">stable</span><span class="p">.</span><span class="n">list</span><span class="err">&#39;</span></code></p><p>Setup keys: <code class="m-code"><span class="n">wget</span> <span class="nl">http</span><span class="p">:</span><span class="c1">//packages.osrfoundation.org/gazebo.key -O - | sudo apt-key add -</span></code></p><p>Reload software list: <code class="m-code"><span class="n">sudo</span> <span class="n">apt</span> <span class="n">update</span></code></p><p>Install Gazebo: <code class="m-code"><span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">gazebo9</span> <span class="n">libgazebo9</span><span class="o">-</span><span class="n">dev</span></code></p><p>Install ROS plugins: <code class="m-code"><span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">ros</span><span class="o">-</span><span class="n">melodic</span><span class="o">-</span><span class="n">gazebo</span><span class="o">-</span><span class="n">ros</span> <span class="n">ros</span><span class="o">-</span><span class="n">melodic</span><span class="o">-</span><span class="n">gazebo</span><span class="o">-</span><span class="n">plugins</span></code></p><p>Get Gazebo plugin for APM (ArduPilot Master):</p><pre class="m-code"><span class="n">cd</span> <span class="o">~</span>
<span class="n">git</span> <span class="n">clone</span> <span class="nl">https</span><span class="p">:</span><span class="c1">//github.com/SwiftGust/ardupilot_gazebo</span>
<span class="n">cd</span> <span class="n">ardupilot_gazebo</span>
<span class="n">git</span> <span class="n">checkout</span> <span class="n">gazebo9</span>
<span class="n">mkdir</span> <span class="n">build</span>
<span class="n">cd</span> <span class="n">build</span>
<span class="n">cmake</span> <span class="p">..</span>
<span class="n">make</span> <span class="o">-</span><span class="n">j4</span>
<span class="n">sudo</span> <span class="n">make</span> <span class="n">install</span></pre><p>Set paths for models:</p><pre class="m-code"><span class="n">echo</span> <span class="err">&#39;</span><span class="k">export</span> <span class="n">GAZEBO_MODEL_PATH</span><span class="o">=~/</span><span class="n">ardupilot_gazebo</span><span class="o">/</span><span class="n">gazebo_models</span><span class="err">&#39;</span> <span class="o">&gt;&gt;</span> <span class="o">~/</span><span class="p">.</span><span class="n">bashrc</span>
<span class="p">.</span> <span class="o">~/</span><span class="p">.</span><span class="n">bashrc</span></pre><p>Add Gazebo Models:</p><pre class="m-code"><span class="n">hg</span> <span class="n">clone</span> <span class="nl">https</span><span class="p">:</span><span class="c1">//bitbucket.org/osrf/gazebo_models ~/gazebo_ws/gazebo_models</span>
<span class="n">cd</span> <span class="o">~/</span><span class="n">gazebo_ws</span><span class="o">/</span><span class="n">gazebo_models</span>
<span class="n">echo</span> <span class="err">&#39;</span><span class="k">export</span> <span class="n">GAZEBO_MODEL_PATH</span><span class="o">=~/</span><span class="n">gazebo_ws</span><span class="o">/</span><span class="nl">gazebo_models</span><span class="p">:</span><span class="err">$</span><span class="p">{</span><span class="n">GAZEBO_MODEL_PATH</span><span class="p">}</span><span class="err">&#39;</span> <span class="o">&gt;&gt;</span> <span class="o">~/</span><span class="p">.</span><span class="n">bashrc</span>
<span class="n">source</span> <span class="o">~/</span><span class="p">.</span><span class="n">bashrc</span></pre><h3>8. Run Simulator</h3><p>In one Terminal (Terminal 1), run SITL:</p><pre class="m-code"><span class="n">cd</span> <span class="o">~/</span><span class="n">ardupilot</span><span class="o">/</span><span class="n">ArduCopter</span><span class="o">/</span>
<span class="n">sim_vehicle</span><span class="p">.</span><span class="n">py</span> <span class="o">-</span><span class="n">j4</span> <span class="o">-</span><span class="n">f</span> <span class="n">Gazebo</span> <span class="o">--</span><span class="n">console</span></pre><p>In another Terminal (Terminal 2), run Gazebo: <code class="m-code"><span class="n">gazebo</span> <span class="o">--</span><span class="n">verbose</span> <span class="o">~/</span><span class="n">ardupilot_gazebo</span><span class="o">/</span><span class="n">gazebo_worlds</span><span class="o">/</span><span class="n">iris_irlock_demo</span><span class="p">.</span><span class="n">world</span></code></p><p>Set parameters for sim in the same window after you run the <code>sim_vehicle.py script</code>. Do this by using command <code>param load &lt;filename&gt;</code> Example params can be found in the <code>Controls-Other</code> repo: <a href="https://github.com/Texas-Aerial-Robotics/Controls-Other">https:/<wbr />/<wbr />github.com/<wbr />Texas-Aerial-Robotics/<wbr />Controls-Other</a></p><p>To load our parameters, clone our <code>Controls-Other</code> repository (Terminal 3):</p><pre class="m-code"><span class="n">cd</span> <span class="o">~</span>
<span class="n">git</span> <span class="n">clone</span> <span class="nl">https</span><span class="p">:</span><span class="c1">//github.com/Texas-Aerial-Robotics/Controls-Other</span></pre><p>In the Ardupilot simulator Terminal (Terminal 1) run: <code class="m-code"><span class="n">param</span> <span class="n">load</span> <span class="p">..</span><span class="o">/</span><span class="p">..</span><span class="o">/</span><span class="n">Controls</span><span class="o">-</span><span class="n">Other</span><span class="o">/</span><span class="n">Params</span><span class="o">/</span><span class="n">Sim_master</span><span class="p">.</span><span class="n">param</span></code> Play around, then close by &quot;Control+C&quot; in the Terminal windows.</p><h3>9. Install Mission 8 Simulator</h3><p>In order to use the Ardupilot simulator with the Mission 8 field - as well as other plugins such as cameras - you need to add ROS packages to Gazebo. Install the following dependencies: <code class="m-code"><span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">ros</span><span class="o">-</span><span class="n">melodic</span><span class="o">-</span><span class="n">gazebo</span><span class="o">-</span><span class="n">ros</span> <span class="n">ros</span><span class="o">-</span><span class="n">melodic</span><span class="o">-</span><span class="n">gazebo</span><span class="o">-</span><span class="n">plugins</span></code></p><p>Clone in the mission8_sim repository into your catkin_ws:</p><pre class="m-code"><span class="n">cd</span> <span class="o">~/</span><span class="n">catkin_ws</span><span class="o">/</span><span class="n">src</span>
<span class="n">git</span> <span class="n">clone</span> <span class="nl">https</span><span class="p">:</span><span class="c1">//github.com/Texas-Aerial-Robotics/mission8_sim.git</span></pre><p>Add the following to your <code>~/.bashrc</code> to help Gazebo find the mission8_sim models: <code class="m-code"><span class="k">export</span> <span class="n">GAZEBO_MODEL_PATH</span><span class="o">=</span><span class="err">$</span><span class="p">{</span><span class="n">GAZEBO_MODEL_PATH</span><span class="p">}</span><span class="o">:~/</span><span class="n">catkin_ws</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">mission8_sim</span><span class="o">/</span><span class="n">models</span></code></p><p>Build the ROS packages you just downloaded:</p><pre class="m-code"><span class="n">cd</span> <span class="o">~/</span><span class="n">catkin_ws</span><span class="o">/</span>
<span class="n">catkin</span> <span class="n">build</span></pre><p>Reload <code>~/.bashrc</code> so the Terminal knows where the packages are located: <code class="m-code"><span class="n">source</span> <span class="o">~/</span><span class="p">.</span><span class="n">bashrc</span></code></p><h4>Run a 3 drone sim with roslaunch</h4><p>In one Terminal (Terminal 1): <code class="m-code"><span class="n">roslaunch</span> <span class="n">mission8_sim</span> <span class="n">multiDrone</span><span class="p">.</span><span class="n">launch</span></code> In another Terminal (Terminal 2), run the following command to start and connect a Ardupilot simulator to Gazebo: <code class="m-code"><span class="n">cd</span> <span class="o">~/</span><span class="n">ardupilot</span><span class="o">/</span><span class="n">ArduCopter</span><span class="o">/</span> <span class="o">&amp;&amp;</span> <span class="n">sim_vehicle</span><span class="p">.</span><span class="n">py</span> <span class="o">-</span><span class="n">j4</span> <span class="o">-</span><span class="n">f</span> <span class="n">Gazebo</span> <span class="o">--</span><span class="n">console</span> <span class="o">--</span><span class="n">location</span><span class="o">=</span><span class="n">HOME</span> <span class="o">-</span><span class="n">I0</span></code> In another Terminal (Terminal 3), run the following command to start and connect a Ardupilot simulator to Gazebo: <code class="m-code"><span class="n">cd</span> <span class="o">~/</span><span class="n">ardupilot</span><span class="o">/</span><span class="n">ArduCopter</span><span class="o">/</span> <span class="o">&amp;&amp;</span> <span class="n">sim_vehicle</span><span class="p">.</span><span class="n">py</span> <span class="o">-</span><span class="n">j4</span> <span class="o">-</span><span class="n">f</span> <span class="n">Gazebo</span> <span class="o">--</span><span class="n">console</span> <span class="o">--</span><span class="n">location</span><span class="o">=</span><span class="n">HOME</span> <span class="o">-</span><span class="n">I1</span></code> In another Terminal (Terminal 4), run the following command to start and connect a Ardupilot simulator to Gazebo: <code class="m-code"><span class="n">cd</span> <span class="o">~/</span><span class="n">ardupilot</span><span class="o">/</span><span class="n">ArduCopter</span><span class="o">/</span> <span class="o">&amp;&amp;</span> <span class="n">sim_vehicle</span><span class="p">.</span><span class="n">py</span> <span class="o">-</span><span class="n">j4</span> <span class="o">-</span><span class="n">f</span> <span class="n">Gazebo</span> <span class="o">--</span><span class="n">console</span> <span class="o">--</span><span class="n">location</span><span class="o">=</span><span class="n">HOME</span> <span class="o">-</span><span class="n">I2</span></code> As you can see, the command above can be modified for any number of drones desired. Play around, then close by &quot;Control+C&quot; in the Terminal windows.</p><h4>To view camera plugin</h4><p>Install image view: <code class="m-code"><span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">ros</span><span class="o">-</span><span class="n">melodic</span><span class="o">-</span><span class="n">image</span><span class="o">-</span><span class="n">view</span></code></p><p>To see camera view: <code class="m-code"><span class="n">rosrun</span> <span class="n">image_view</span> <span class="n">image_view</span> <span class="nl">image</span><span class="p">:</span><span class="o">=/</span><span class="n">webcam</span><span class="o">/</span><span class="n">image_raw</span></code></p><h3>10. Run Mavros Scripts from Controls-Ros package</h3><p>Launch the sim via roslaunch (Terminal 1): <code class="m-code"><span class="n">roslaunch</span> <span class="n">mission8_sim</span> <span class="n">droneOnly</span><span class="p">.</span><span class="n">launch</span></code> In another Terminal (Terminal 2) run the following command to start and connect the Ardupilot sim to Gazebo: <code class="m-code"><span class="n">cd</span> <span class="o">~/</span><span class="n">ardupilot</span><span class="o">/</span><span class="n">ArduCopter</span><span class="o">/</span> <span class="o">&amp;&amp;</span> <span class="n">sim_vehicle</span><span class="p">.</span><span class="n">py</span> <span class="o">-</span><span class="n">f</span> <span class="n">gazebo</span><span class="o">-</span><span class="n">iris</span> <span class="o">--</span><span class="n">console</span> <span class="o">-</span><span class="n">I0</span></code> In another Terminal (Terminal 3) run:</p><pre class="m-code"><span class="n">cd</span> <span class="o">~/</span><span class="n">Controls</span><span class="o">-</span><span class="n">Other</span><span class="o">/</span><span class="n">Launch</span><span class="o">/</span>
<span class="n">roslaunch</span> <span class="n">apm</span><span class="p">.</span><span class="n">launch</span></pre><p>Be sure to wait for the drone to go throught the full initialization process. The drone will be ready to fly once the console reads Optical Flow now aiding and origin set to GPS. For the competition we will not use GPS to home the drone, but for introduction sake let the drone use GPS</p><p>In another Terminal (Terminal 4) run: <code class="m-code"><span class="n">rosrun</span> <span class="n">flight_pkg</span> <span class="n">staple</span></code></p><p>Then in MavProxy (Terminal 2) switch the mode into <code>guided</code>: <code class="m-code"><span class="n">mode</span> <span class="n">GUIDED</span></code></p><p>you did it! 🎉</p><hr/><h3>Troubleshooting and Common Problems:</h3><h4>During Catkin Build:</h4><p>#### Complains about &quot;GeographicLib&quot;</p><pre class="m-code"><span class="n">cd</span> <span class="o">~/</span><span class="n">catkin_ws</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">mavros</span><span class="o">/</span><span class="n">mavros</span><span class="o">/</span><span class="n">scripts</span>
<span class="n">sudo</span> <span class="p">.</span><span class="o">/</span><span class="n">install_geographiclib_datasets</span><span class="p">.</span><span class="n">sh</span></pre><p>#### Complains about &quot;Geometry Msgs&quot; <code class="m-code"><span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">ros</span><span class="o">-</span><span class="n">melodic</span><span class="o">-</span><span class="n">geometry</span><span class="o">-</span><span class="n">msgs</span></code></p><hr/><p>References:</p><ul><li><a href="https://dev.px4.io/en/ros/mavros_installation.html#source-installation">https://dev.px4.io/en/ros/mavros_<wbr />installation.html#source-installation</a></li><li><a href="http://wiki.ros.org/catkin/Tutorials/create_a_workspace">http://wiki.ros.org/catkin/Tutorials/create_<wbr />a_<wbr />workspace</a></li><li><a href="https://github.com/ArduPilot/ardupilot_wiki/issues/1001">https://github.com/ArduPilot/ardupilot_<wbr />wiki/issues/1001</a></li><li><a href="https://github.com/AS4SR/general_info/wiki/ArduPilot:-Instructions-to-set-up-and-run-an-autopilot-using-SITL-and-Gazebo-simulator">https://github.com/AS4SR/general_<wbr />info/wiki/ArduPilot:-Instructions-to-set-up-and-run-an-autopilot-using-SITL-and-Gazebo-simulator</a></li></ul>
      </div>
    </div>
  </div>
</article></main>
<div class="m-dox-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-dox-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">&hellip;</div>
        </div>
        <div class="m-dox-search-content">
          <form>
            <input type="search" name="q" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" autocomplete="off" spellcheck="false" />
          </form>
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
          <div id="search-help" class="m-text m-dim m-text-center">
            <p class="m-noindent">Search for symbols, directories, files, pages or
            modules. You can omit any prefix from the symbol or file path; adding a
            <code>:</code> or <code>/</code> suffix lists all members of given symbol or
            directory.</p>
            <p class="m-noindent">Use <span class="m-label m-dim">&darr;</span>
            / <span class="m-label m-dim">&uarr;</span> to navigate through the list,
            <span class="m-label m-dim">Enter</span> to go.
            <span class="m-label m-dim">Tab</span> autocompletes common prefix, you can
            copy a link to the result using <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">L</span> while <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">M</span> produces a Markdown link.</p>

          </div>
          <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search.js"></script>
<script src="searchdata.js" async="async"></script>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>Intelligent Quads Documentation. Created by <a href="https://doxygen.org/">Doxygen</a> 1.8.16 and <a href="https://mcss.mosra.cz/">m.css</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>
